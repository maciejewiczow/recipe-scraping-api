from aws_lambda_powertools import Logger
from aws_lambda_powertools.utilities.typing import LambdaContext
from aws_lambda_powertools.utilities.parser.models import APIGatewayProxyEventV2Model
from shared.utils.dump_response import dump_response
from shared.utils.environment import validate_environment
from shared.utils.openapi import openapi_endpoint
from shared.utils.verify_quota import verify_user_quota
<% if (groupTemplates?.length ?? 0 > 1) { %>from .env import Environment<% } %>


log = Logger("<%= relativeFilePath.split(/\\|\//).at(-2) %>")


@log.inject_lambda_context(log_event=True)
@dump_response
@verify_user_quota(log)
@openapi_endpoint(
    log,
    responses=[],
    summary="",
    description="",
    operationId="",
    tags=[],
)
<% if (groupTemplates?.length ?? 0 > 1) { %>@validate_environment(model=Environment, log=log)<% } %>
def handler(
    raw_event: APIGatewayProxyEventV2Model,
    context: LambdaContext,
    *,
    path,
    body,
    query,<% if (groupTemplates?.length ?? 0 > 1) { %>
    env: Environment,<% } %>
    **kwargs,
):
    pass
